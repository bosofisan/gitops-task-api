apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - ../../base

namespace: task-api-dev

namePrefix: dev-

commonLabels:
  environment: dev
  version: "1.0.0"

commonAnnotations:
  environment: development
  description: "Task API - Development Environment"

replicas:
  - name: task-api-deployment
    count: 1

images:
  - name: task-api
    newTag: latest
    patch: |-
      - op: replace
        path: /spec/template/spec/containers/0/resources
        value:
          requests:
            memory: "64Mi"
            cpu: "50m"
          limits:
            memory: "128Mi"
            cpu: "100m"
  - target:
      kind: Service
      name: dev-task-api-service
    patch: |-
      - op: replace
        path: /spec/type
        value: NodePort

env:
  - name: ENVIRONMENT
    value: development
  - name: LOG_LEVEL
    value: DEBUG
